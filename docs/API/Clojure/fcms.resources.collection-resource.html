<!DOCTYPE html>
<html><head><meta charset="UTF-8"><link href="css/default.css" rel="stylesheet" type="text/css"><script src="js/jquery.min.js" type="text/javascript"></script><script src="js/page_effects.js" type="text/javascript"></script><title>fcms.resources.collection-resource documentation</title></head><body><div id="header"><h2>Generated by <a href="https://github.com/weavejester/codox">Codox</a></h2><h1><a href="index.html">Falkland-cms 0.2.0-SNAPSHOT API documentation</a></h1></div><div class="sidebar" id="namespaces"><h3><span>Namespaces</span></h3><ul><li><a href="fcms.resources.collection.html"><span>fcms.resources.collection</span></a></li><li class="current"><a href="fcms.resources.collection-resource.html"><span>fcms.resources.collection-resource</span></a></li><li><a href="fcms.resources.common.html"><span>fcms.resources.common</span></a></li><li><a href="fcms.resources.item.html"><span>fcms.resources.item</span></a></li><li><a href="fcms.resources.taxonomy.html"><span>fcms.resources.taxonomy</span></a></li></ul></div><div class="sidebar" id="vars"><h3>Public Vars</h3><ul><li><a href="fcms.resources.collection-resource.html#var-all-resources"><span>all-resources</span></a></li><li><a href="fcms.resources.collection-resource.html#var-create-resource"><span>create-resource</span></a></li><li><a href="fcms.resources.collection-resource.html#var-delete-resource"><span>delete-resource</span></a></li><li><a href="fcms.resources.collection-resource.html#var-get-resource"><span>get-resource</span></a></li><li><a href="fcms.resources.collection-resource.html#var-update-resource"><span>update-resource</span></a></li><li><a href="fcms.resources.collection-resource.html#var-valid-new-resource"><span>valid-new-resource</span></a></li><li><a href="fcms.resources.collection-resource.html#var-valid-resource-update"><span>valid-resource-update</span></a></li></ul></div><div class="namespace-docs" id="content"><h2>fcms.resources.collection-resource documentation</h2><pre class="doc"></pre><div class="public" id="var-all-resources"><h3>all-resources</h3><div class="usage"><code>(all-resources coll-slug type)</code></div><pre class="doc">Given the slug of the collection, return all the resources it contains of the type specified
as a sequence of maps, or return :bad-collection if there's no collection with that slug.</pre><div class="src-link"><a href="http://github.com/SnootyMonkey/Falkland-CMS/blob/master/#L128">Source</a></div></div><div class="public" id="var-create-resource"><h3>create-resource</h3><div class="usage"><code>(create-resource coll-slug resource-name type reserved-properties)</code><code>(create-resource coll-slug resource-name type reserved-properties props)</code></div><pre class="doc">Create a new resource in the collection specified by its slug, using the specified
resource name, resource type and an optional map of properties.
If :slug is included in the properties it will be used as the resource's slug, otherwise
the slug will be created from the name.
If a :slug is included in the properties and a resource already exists
in the collection with that slug, a :slug-conflict will be returned.
If a :slug is included in the properties and it's not valid,
:invalid-slug will be returned.
If a property is included in the map of properties that is in the reserved-properties
set, :property-conflict will be returned.</pre><div class="src-link"><a href="http://github.com/SnootyMonkey/Falkland-CMS/blob/master/#L62">Source</a></div></div><div class="public" id="var-delete-resource"><h3>delete-resource</h3><div class="usage"><code>(delete-resource coll-slug slug type)</code></div><pre class="doc">Given the slug of the collection containing the resource and the slug of the resource,
delete the resource, or return :bad-collection if there's no collection with that slug, or
the provided bad resource keyword if there is no resource with that slug.</pre><div class="src-link"><a href="http://github.com/SnootyMonkey/Falkland-CMS/blob/master/#L84">Source</a></div></div><div class="public" id="var-get-resource"><h3>get-resource</h3><div class="usage"><code>(get-resource coll-slug slug type)</code></div><pre class="doc">Given the slug of the collection containing the resource and the slug of the resource,
return the resource as a map, or return :bad-collection if there's no collection with that slug, or
nil if there is no resource with that slug.</pre><div class="src-link"><a href="http://github.com/SnootyMonkey/Falkland-CMS/blob/master/#L32">Source</a></div></div><div class="public" id="var-update-resource"><h3>update-resource</h3><div class="usage"><code>(update-resource coll-slug slug properties type)</code></div><pre class="doc">Update a resource retaining it's manufactured properties and replacing the rest with the provided properties
</pre><div class="src-link"><a href="http://github.com/SnootyMonkey/Falkland-CMS/blob/master/#L116">Source</a></div></div><div class="public" id="var-valid-new-resource"><h3>valid-new-resource</h3><div class="usage"><code>(valid-new-resource coll-slug resource-name reserved-properties type)</code><code>(valid-new-resource coll-slug resource-name reserved-properties type {provided-slug :slug, :as props})</code></div><pre class="doc">Given the slug of the collection, the name of the resource, a map of a potential new resource,
and a retrieval function for the resource type, check if the everything is in order to create
the new resource.
Ensure the collection exists or return :bad-collection.
Ensure the name of the resource is specified or return :no-name.
Ensure the slug is valid and doesn't already exist if it's specified,
or return :invalid-slug or :slug-conflict respectively.
If a property is included in the map of properties that is in the reserved-properties
set, :property-conflict will be returned.</pre><div class="src-link"><a href="http://github.com/SnootyMonkey/Falkland-CMS/blob/master/#L40">Source</a></div></div><div class="public" id="var-valid-resource-update"><h3>valid-resource-update</h3><div class="usage"><code>(valid-resource-update coll-slug slug reserved-properties {item-name :name, provided-slug :slug, :as props} type)</code></div><pre class="doc">Given the slug of the collection, the slug of the resource,
and a map of updated properties for the resource,
check if the everything is in order to update the resource.
Ensure the collection exists or return :bad-collection.
Ensure the resource exists or return :bad-&lt;resource&gt;.
If a new slug is provided in the properties, ensure it is
valid or return :invalid-slug and ensure it is unused or
return :slug-conflict. If no item slug is specified in
the properties it will be retain its current slug.</pre><div class="src-link"><a href="http://github.com/SnootyMonkey/Falkland-CMS/blob/master/#L95">Source</a></div></div></div></body></html>
<!DOCTYPE html>
<html><head><meta charset="UTF-8"><link href="css/default.css" rel="stylesheet" type="text/css"><script src="js/jquery.min.js" type="text/javascript"></script><script src="js/page_effects.js" type="text/javascript"></script><title>fcms.resources.taxonomy documentation</title></head><body><div id="header"><h2>Generated by <a href="https://github.com/weavejester/codox">Codox</a></h2><h1><a href="index.html">Falkland-cms 0.2.0-SNAPSHOT API documentation</a></h1></div><div class="sidebar" id="namespaces"><h3><a href="index.html"><span class="inner">Namespaces</span></a></h3><ul><li class="depth-1"><div class="no-link"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>fcms</span></div></div></li><li class="depth-2"><div class="no-link"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>resources</span></div></div></li><li class="depth-3 branch"><a href="fcms.resources.collection.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>collection</span></div></a></li><li class="depth-3 branch"><a href="fcms.resources.common.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>common</span></div></a></li><li class="depth-3 branch"><a href="fcms.resources.item.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>item</span></div></a></li><li class="depth-3 current"><a href="fcms.resources.taxonomy.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>taxonomy</span></div></a></li></ul></div><div class="sidebar" id="vars"><h3><a href="#top"><span class="inner">Public Vars</span></a></h3><ul><li class="depth-1"><a href="fcms.resources.taxonomy.html#var-all-taxonomies"><div class="inner"><span>all-taxonomies</span></div></a></li><li class="depth-1"><a href="fcms.resources.taxonomy.html#var-categorize-item"><div class="inner"><span>categorize-item</span></div></a></li><li class="depth-1"><a href="fcms.resources.taxonomy.html#var-category-exists"><div class="inner"><span>category-exists</span></div></a></li><li class="depth-1"><a href="fcms.resources.taxonomy.html#var-create-category"><div class="inner"><span>create-category</span></div></a></li><li class="depth-1"><a href="fcms.resources.taxonomy.html#var-create-taxonomy"><div class="inner"><span>create-taxonomy</span></div></a></li><li class="depth-1"><a href="fcms.resources.taxonomy.html#var-delete-taxonomy"><div class="inner"><span>delete-taxonomy</span></div></a></li><li class="depth-1"><a href="fcms.resources.taxonomy.html#var-get-taxonomy"><div class="inner"><span>get-taxonomy</span></div></a></li><li class="depth-1"><a href="fcms.resources.taxonomy.html#var-items-for-category"><div class="inner"><span>items-for-category</span></div></a></li><li class="depth-1"><a href="fcms.resources.taxonomy.html#var-items-for-taxonomy"><div class="inner"><span>items-for-taxonomy</span></div></a></li><li class="depth-1"><a href="fcms.resources.taxonomy.html#var-normalize-category-path"><div class="inner"><span>normalize-category-path</span></div></a></li><li class="depth-1"><a href="fcms.resources.taxonomy.html#var-uncategorize-item"><div class="inner"><span>uncategorize-item</span></div></a></li><li class="depth-1"><a href="fcms.resources.taxonomy.html#var-update-taxonomy"><div class="inner"><span>update-taxonomy</span></div></a></li><li class="depth-1"><a href="fcms.resources.taxonomy.html#var-valid-new-taxonomy"><div class="inner"><span>valid-new-taxonomy</span></div></a></li><li class="depth-1"><a href="fcms.resources.taxonomy.html#var-valid-taxonomy-update"><div class="inner"><span>valid-taxonomy-update</span></div></a></li></ul></div><div class="namespace-docs" id="content"><h2 class="anchor" id="top">fcms.resources.taxonomy</h2><div class="doc"><pre class="plaintext">Namespace for FCMS taxonomies. A taxonomy is a hierarchical organization of categories to organize
the items in a collection. A collection may have many taxonomies and they are independent of each other.</pre></div><div class="public anchor" id="var-all-taxonomies"><h3>all-taxonomies</h3><div class="usage"><code>(all-taxonomies coll-slug)</code></div><div class="doc"><pre class="plaintext">Given the slug of the collection, return all the taxonomies it contains as a sequence of maps,
or return :bad-collection if there&apos;s no collection with that slug.</pre></div><div class="src-link"><a href="http://github.com/SnootyMonkey/Falkland-CMS/blob/master/src/fcms/resources/taxonomy.clj#L90">view source</a></div></div><div class="public anchor" id="var-categorize-item"><h3>categorize-item</h3><div class="usage"><code>(categorize-item coll-slug item-slug category-path)</code></div><div class="doc"><pre class="plaintext">Given the slug of the collection, a slug of an item in the collection, and a path to a category in a taxonomy,
categorize the item as a member of the category. This function is idempotent and categorizing the item again won&apos;t
change the item.
If this request is to categorize the item with a child of a parent category that is already categorized on the item,
then the parent categorization will be removed.
:bad-collection is returned if there&apos;s no collection with that slug.
:bad-item is returned if there&apos;s no item in the collection with that slug.
:bad-taxonomy is returned if there&apos;s no taxonomy with that slug at the start of the category path.
:bad-category is returned if there&apos;s no category in the taxonomy with that category path.
:duplicate-category is returned if item is already a member of the provided category or one of its children.</pre></div><div class="src-link"><a href="http://github.com/SnootyMonkey/Falkland-CMS/blob/master/src/fcms/resources/taxonomy.clj#L322">view source</a></div></div><div class="public anchor" id="var-category-exists"><h3>category-exists</h3><div class="usage"><code>(category-exists coll-slug category-path)</code></div><div class="doc"><pre class="plaintext">Given the slug of the collection, and a path to a category return true if the category exists and false if it does not.
:bad-collection is returned if there&apos;s no collection with that slug.
:bad-taxonomy is returned if there&apos;s no taxonomy with that slug at the start of the category path.</pre></div><div class="src-link"><a href="http://github.com/SnootyMonkey/Falkland-CMS/blob/master/src/fcms/resources/taxonomy.clj#L280">view source</a></div></div><div class="public anchor" id="var-create-category"><h3>create-category</h3><div class="usage"><code>(create-category coll-slug category-path)</code><code>(create-category coll-slug category-path category-name)</code></div><div class="doc"><pre class="plaintext">Given the slug of the collection, a path to a new category, add an optional name for the category, create
the category and any missing categories in the path to the category.
For example, a path: /taxonomy-slug/existing-a/new-category-a/new-category-b
would result in creating two new categories with the slugs new-category-a and new-category-b. If a name
is provided, it is the name for the last new category, in this case the new category with the slug new-category-b.
The slug from the category path is used as the name where none is provided.
:bad-collection is returned if there&apos;s no collection with that slug.
:bad-taxonomy is returned if there&apos;s no taxonomy with that slug at the start of the category path.
:invalid-category-slug is returned if any of the slugs in the category path are not valid FCMS slugs.
:invalid-category-name is returned if a category name is provided and it&apos;s not a non-empty string.</pre></div><div class="src-link"><a href="http://github.com/SnootyMonkey/Falkland-CMS/blob/master/src/fcms/resources/taxonomy.clj#L243">view source</a></div></div><div class="public anchor" id="var-create-taxonomy"><h3>create-taxonomy</h3><div class="usage"><code>(create-taxonomy coll-slug taxonomy-name)</code><code>(create-taxonomy coll-slug taxonomy-name props)</code></div><div class="doc"><pre class="plaintext">Create a new taxonomy in the collection specified by its slug, using the specified
taxonomy name and an optional map of properties.
If :slug is included in the properties it will be used as the taxonomy&apos;s slug, otherwise
the slug will be created from the name.
:slug-conflict is returned if a :slug is included in the properties and a resource already exists
in the collection with that slug.
:invalid-slug is returned if a :slug is included in the properties and it&apos;s not valid.
:property-conflict is returned if a property is included in the map of properties that is in
the reserved-properties set.</pre></div><div class="src-link"><a href="http://github.com/SnootyMonkey/Falkland-CMS/blob/master/src/fcms/resources/taxonomy.clj#L42">view source</a></div></div><div class="public anchor" id="var-delete-taxonomy"><h3>delete-taxonomy</h3><div class="usage"><code>(delete-taxonomy coll-slug slug)</code></div><div class="doc"><pre class="plaintext">Given the slug of the collection containing the taxonomy and the slug of the taxonomy,
delete the taxonomy, or return :bad-collection if there&apos;s no collection with that slug, or
:bad-taxonomy if there is no taxonomy with that slug.</pre></div><div class="src-link"><a href="http://github.com/SnootyMonkey/Falkland-CMS/blob/master/src/fcms/resources/taxonomy.clj#L56">view source</a></div></div><div class="public anchor" id="var-get-taxonomy"><h3>get-taxonomy</h3><div class="usage"><code>(get-taxonomy coll-slug slug)</code></div><div class="doc"><pre class="plaintext">Given the slug of the collection containing the taxonomy and the slug of the taxonomy,
return the taxonomy as a map, or return :bad-collection if there&apos;s no collection with that slug, or
nil if there is no taxonomy with that slug.</pre></div><div class="src-link"><a href="http://github.com/SnootyMonkey/Falkland-CMS/blob/master/src/fcms/resources/taxonomy.clj#L22">view source</a></div></div><div class="public anchor" id="var-items-for-category"><h3>items-for-category</h3><div class="usage"><code>(items-for-category coll-slug category-path)</code></div><div class="doc"><pre class="plaintext">Given the slug of the collection, and a path to a category in a taxonomy, return a sequence of the
items contained in the category.
:bad-collection is returned if there&apos;s no collection with that slug.
:bad-taxonomy is returned if there&apos;s no taxonomy with that slug at the start of the category path.
:bad-category is returned if any portion of the category path does not exist in the taxonomy.</pre></div><div class="src-link"><a href="http://github.com/SnootyMonkey/Falkland-CMS/blob/master/src/fcms/resources/taxonomy.clj#L381">view source</a></div></div><div class="public anchor" id="var-items-for-taxonomy"><h3>items-for-taxonomy</h3><div class="usage"><code>(items-for-taxonomy coll-slug taxonomy-slug)</code></div><div class="doc"><pre class="plaintext">Given the slug of the collection, and the slug of a taxonomy, return a sequence of the
items categorized in the taxonomy.
:bad-collection is returned if there&apos;s no collection with that slug.
:bad-taxonomy is returned if there&apos;s no taxonomy with that slug at the start of the category path.</pre></div><div class="src-link"><a href="http://github.com/SnootyMonkey/Falkland-CMS/blob/master/src/fcms/resources/taxonomy.clj#L369">view source</a></div></div><div class="public anchor" id="var-normalize-category-path"><h3>normalize-category-path</h3><div class="usage"><code>(normalize-category-path category-path)</code></div><div class="doc"><pre class="plaintext">Remove the prefix slash and trailing slash from the category-path if they are present.
</pre></div><div class="src-link"><a href="http://github.com/SnootyMonkey/Falkland-CMS/blob/master/src/fcms/resources/taxonomy.clj#L294">view source</a></div></div><div class="public anchor" id="var-uncategorize-item"><h3>uncategorize-item</h3><div class="usage"><code>(uncategorize-item coll-slug item-slug category-path)</code></div><div class="doc"><pre class="plaintext">Given the slug of the collection, a slug of an item in the collection, and a path to a category in a taxonomy,
remove the item as a member of the category.
:bad-collection is returned if there&apos;s no collection with that slug.
:bad-item is returned if there&apos;s no item in the collection with that slug.
:bad-taxonomy is returned if there&apos;s no taxonomy with that slug at the start of the category path.
:bad-category is returned if the item is not categorized with the provided category path.</pre></div><div class="src-link"><a href="http://github.com/SnootyMonkey/Falkland-CMS/blob/master/src/fcms/resources/taxonomy.clj#L346">view source</a></div></div><div class="public anchor" id="var-update-taxonomy"><h3>update-taxonomy</h3><div class="usage"><code>(update-taxonomy coll-slug slug props)</code></div><div class="doc"><pre class="plaintext">Update a taxonomy in the collection specified by its slug using the specified
map of properties. If :slug is included in the properties
the taxonomy will be moved to the new slug, otherwise the slug will remain the same.
The same validity conditions and invalid return values as valid-taxonomy-update? apply.</pre></div><div class="src-link"><a href="http://github.com/SnootyMonkey/Falkland-CMS/blob/master/src/fcms/resources/taxonomy.clj#L76">view source</a></div></div><div class="public anchor" id="var-valid-new-taxonomy"><h3>valid-new-taxonomy</h3><div class="usage"><code>(valid-new-taxonomy coll-slug taxonomy-name)</code><code>(valid-new-taxonomy coll-slug taxonomy-name props)</code></div><div class="doc"><pre class="plaintext">Given the slug of the collection, the name of the taxonomy, and a map of a potential new taxonomy,
check if the everything is in order to create the new taxonomy.
It ensures the collection exists or returns :bad-collection.
It ensures the name of the taxonomy is specified or returns :no-name.
It ensures the slug is valid and doesn&apos;t already exist if it&apos;s specified,
or returns :invalid-slug or :slug-conflict respectively.
:property-conflict is returned if a property is included in the map of properties that is in the
reserved-properties set.</pre></div><div class="src-link"><a href="http://github.com/SnootyMonkey/Falkland-CMS/blob/master/src/fcms/resources/taxonomy.clj#L29">view source</a></div></div><div class="public anchor" id="var-valid-taxonomy-update"><h3>valid-taxonomy-update</h3><div class="usage"><code>(valid-taxonomy-update coll-slug slug props)</code></div><div class="doc"><pre class="plaintext">Given the slug of the collection, the slug of the taxonomy,
and a map of updated properties for the taxonomy,
check if the everything is in order to update the taxonomy.
Ensure the collection exists or return :bad-collection.
Ensure the item exists or return :bad-taxonomy.
If a new slug is provided in the properties, ensure it is
valid or return :invalid-slug and ensure it is unused or
return :slug-conflict. If no item slug is specified in
the properties it will be retain its current slug.</pre></div><div class="src-link"><a href="http://github.com/SnootyMonkey/Falkland-CMS/blob/master/src/fcms/resources/taxonomy.clj#L63">view source</a></div></div></div></body></html>
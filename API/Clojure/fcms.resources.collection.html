<!DOCTYPE html>
<html><head><meta charset="UTF-8"><link href="css/default.css" rel="stylesheet" type="text/css"><script src="js/jquery.min.js" type="text/javascript"></script><script src="js/page_effects.js" type="text/javascript"></script><title>fcms.resources.collection documentation</title></head><body><div id="header"><h2>Generated by <a href="https://github.com/weavejester/codox">Codox</a></h2><h1><a href="index.html">Falkland-cms 0.2.0-SNAPSHOT API documentation</a></h1></div><div class="sidebar" id="namespaces"><h3><span>Namespaces</span></h3><ul><li class="current"><a href="fcms.resources.collection.html"><span>fcms.resources.collection</span></a></li><li><a href="fcms.resources.common.html"><span>fcms.resources.common</span></a></li><li><a href="fcms.resources.item.html"><span>fcms.resources.item</span></a></li><li><a href="fcms.resources.taxonomy.html"><span>fcms.resources.taxonomy</span></a></li></ul></div><div class="sidebar" id="vars"><h3>Public Vars</h3><ul><li><a href="fcms.resources.collection.html#var-all-collections"><span>all-collections</span></a></li><li><a href="fcms.resources.collection.html#var-create-collection"><span>create-collection</span></a></li><li><a href="fcms.resources.collection.html#var-delete-collection"><span>delete-collection</span></a></li><li><a href="fcms.resources.collection.html#var-get-collection"><span>get-collection</span></a></li><li><a href="fcms.resources.collection.html#var-item-count"><span>item-count</span></a></li><li><a href="fcms.resources.collection.html#var-update-collection"><span>update-collection</span></a></li><li><a href="fcms.resources.collection.html#var-valid-collection-update%3F"><span>valid-collection-update?</span></a></li><li><a href="fcms.resources.collection.html#var-with-collection"><span>with-collection</span></a></li></ul></div><div class="namespace-docs" id="content"><h2>fcms.resources.collection documentation</h2><pre class="doc">
</pre><div class="public" id="var-all-collections"><h3>all-collections</h3><div class="usage"><code>(all-collections)</code></div><pre class="doc">Return all the collections in the system as a sequence of maps.
</pre><div class="src-link"><a href="http://github.com/SnootyMonkey/Falkland-CMS/blob/master/src/fcms/resources/collection.clj#L115">Source</a></div></div><div class="public" id="var-create-collection"><h3>create-collection</h3><div class="usage"><code>(create-collection coll-name)</code><code>(create-collection coll-name props)</code></div><pre class="doc">Create a new collection using the specified name and optional map of properties.
If :slug is included in the properties it will be used as the collection's slug,
otherwise one will be created from the name.
:slug-conflict is returned if a :slug is included in the
properties and a collection already exists with that slug.</pre><div class="src-link"><a href="http://github.com/SnootyMonkey/Falkland-CMS/blob/master/src/fcms/resources/collection.clj#L30">Source</a></div></div><div class="public" id="var-delete-collection"><h3>delete-collection</h3><div class="usage"><code>(delete-collection slug)</code></div><pre class="doc">Given the slug of the collection, delete it and all its contents and return true,
or return :bad-collection if the collection slug is not good</pre><div class="src-link"><a href="http://github.com/SnootyMonkey/Falkland-CMS/blob/master/src/fcms/resources/collection.clj#L52">Source</a></div></div><div class="public" id="var-get-collection"><h3>get-collection</h3><div class="usage"><code>(get-collection slug)</code></div><pre class="doc">Given the slug of the collection, return the collection as a map, or nil if there's no collection with that slug
</pre><div class="src-link"><a href="http://github.com/SnootyMonkey/Falkland-CMS/blob/master/src/fcms/resources/collection.clj#L14">Source</a></div></div><div class="public" id="var-item-count"><h3>item-count</h3><div class="usage"><code>(item-count coll-slug)</code></div><pre class="doc">Given the slug of the collection, return the number of items it contains,
or return :bad-collection if the collection slug is no good</pre><div class="src-link"><a href="http://github.com/SnootyMonkey/Falkland-CMS/blob/master/src/fcms/resources/collection.clj#L106">Source</a></div></div><div class="public" id="var-update-collection"><h3>update-collection</h3><div class="usage"><code>(update-collection slug props)</code></div><pre class="doc">Update the collection specified by its slug using the specified
map of properties. If :slug is included in the properties
the item will be moved to the new slug, otherwise the slug will remain the same.
The same validity conditions and invalid return values as valid-item-update? apply.</pre><div class="src-link"><a href="http://github.com/SnootyMonkey/Falkland-CMS/blob/master/src/fcms/resources/collection.clj#L86">Source</a></div></div><div class="public" id="var-valid-collection-update%3F"><h3>valid-collection-update?</h3><div class="usage"><code>(valid-collection-update? slug {coll-name :name, provided-slug :slug})</code></div><pre class="doc">Given the slug of the collection, and a map of updated
properties for the collection, check if the everything
is in order to update the collection.
Ensure the collection exists or return :bad-collection.
If a new slug is provided in the properties, ensure it is
valid or return :invalid-slug and ensure it is unused or
return :slug-conflict. If no slug is specified in
the properties it will be retain its current slug.</pre><div class="src-link"><a href="http://github.com/SnootyMonkey/Falkland-CMS/blob/master/src/fcms/resources/collection.clj#L60">Source</a></div></div><div class="public" id="var-with-collection"><h3>with-collection</h3><h4 class="macro">macro</h4><div class="usage"><code>(with-collection coll-slug &amp; body)</code></div><pre class="doc">Given the slug of the collection, execute some code with the retrieved collection
lexically scoped as collection, or return :bad-collection if the collection slug is no good</pre><div class="src-link"><a href="http://github.com/SnootyMonkey/Falkland-CMS/blob/master/src/fcms/resources/collection.clj#L97">Source</a></div></div></div></body></html>